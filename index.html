<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RNG Collect & Trade Pro - Login</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>

<div id="auth-container">
  <h1 class="logo">RNG COLLECT PRO</h1>
  <p class="subtitle">Enhanced Edition - Collect, Trade, Dominate!</p>
  <input id="username" placeholder="Username" />
  <input id="password" type="password" placeholder="Password" />
  <div class="auth-row">
    <button id="login-btn">Login</button>
    <button id="register-btn">Register</button>
  </div>
  <p id="auth-message"></p>
  <div class="features-preview">
    <div class="feature-item">
      <span class="feature-icon">🎲</span>
      <span>Advanced RNG System</span>
    </div>
    <div class="feature-item">
      <span class="feature-icon">⚡</span>
      <span>Epic Animations</span>
    </div>
    <div class="feature-item">
      <span class="feature-icon">🏆</span>
      <span>Achievement System</span>
    </div>
    <div class="feature-item">
      <span class="feature-icon">🎭</span>
      <span>Anime Characters</span>
    </div>
    <div class="feature-item">
      <span class="feature-icon">⚔️</span>
      <span>Squad Battles</span>
    </div>
    <div class="feature-item">
      <span class="feature-icon">👹</span>
      <span>Boss Battles</span>
    </div>
  </div>
</div>

<script>
// Simple Login/Register System
document.addEventListener('DOMContentLoaded', function() {
  const loginBtn = document.getElementById('login-btn');
  const registerBtn = document.getElementById('register-btn');
  const authMessage = document.getElementById('auth-message');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');

  // Load existing users
  function loadUsers() {
    try {
      return JSON.parse(localStorage.getItem('users') || '{}');
    } catch (e) {
      console.error('Error loading users:', e);
      return {};
    }
  }

  // Save users
  function saveUsers(users) {
    try {
      localStorage.setItem('users', JSON.stringify(users));
    } catch (e) {
      console.error('Error saving users:', e);
    }
  }

  // Create demo users if none exist
  function initializeDemoUsers() {
    const users = loadUsers();
    
    // Always ensure Owner exists
    if (!users['Owner']) {
      users['Owner'] = {
        password: 'owner1122',
        inventory: [],
        equipped: null,
        level: 100,
        xp: 999999,
        coins: 100,
        maxInventory: 1000,
        characters: [],
        squad: [],
        auras: [],
        freeSpins: 50,
        stats: {
          totalRolls: 9999,
          totalTrades: 9999,
          totalSales: 9999,
          legendaryFound: 999,
          epicFound: 999,
          rareFound: 999,
          bestItem: null,
          battlesWon: 9999,
          battlesLost: 0
        },
        achievements: [],
        tradeHistory: [],
        rollHistory: [],
        dailyStreak: 999,
        lastLoginDate: null,
        isOwner: true
      };
    }
    
    if (Object.keys(users).length === 1) { // Only Owner exists
      users['Alice'] = {
        password: 'a',
        inventory: [],
        equipped: null,
        level: 1,
        xp: 0,
        coins: 100,
        maxInventory: 50,
        characters: [],
        squad: [],
        auras: [],
        freeSpins: 10,
        stats: {
          totalRolls: 0,
          totalTrades: 0,
          totalSales: 0,
          legendaryFound: 0,
          epicFound: 0,
          rareFound: 0,
          bestItem: null,
          battlesWon: 0,
          battlesLost: 0
        },
        achievements: [],
        tradeHistory: [],
        rollHistory: [],
        dailyStreak: 0,
        lastLoginDate: null
      };
      users['Bob'] = {
        password: 'b',
        inventory: [],
        equipped: null,
        level: 1,
        xp: 0,
        coins: 100,
        maxInventory: 50,
        characters: [],
        squad: [],
        auras: [],
        freeSpins: 10,
        stats: {
          totalRolls: 0,
          totalTrades: 0,
          totalSales: 0,
          legendaryFound: 0,
          epicFound: 0,
          rareFound: 0,
          bestItem: null,
          battlesWon: 0,
          battlesLost: 0
        },
        achievements: [],
        tradeHistory: [],
        rollHistory: [],
        dailyStreak: 0,
        lastLoginDate: null
      };
    }
    
    // Give 100 coins and 10 free spins to all users
    Object.keys(users).forEach(username => {
      if (users[username].coins < 100) {
        users[username].coins = 100;
      }
      if (!users[username].freeSpins) {
        users[username].freeSpins = 10;
      }
    });
    
    saveUsers(users);
  }

  // Register function
  registerBtn.addEventListener('click', function() {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();

    if (!username || !password) {
      authMessage.textContent = 'Please fill in both fields';
      authMessage.style.color = '#ef4444';
      return;
    }

    if (username.length < 3) {
      authMessage.textContent = 'Username must be at least 3 characters';
      authMessage.style.color = '#ef4444';
      return;
    }

    if (password.length < 3) {
      authMessage.textContent = 'Password must be at least 3 characters';
      authMessage.style.color = '#ef4444';
      return;
    }

    const users = loadUsers();
    
    if (users[username]) {
      authMessage.textContent = 'Username already exists';
      authMessage.style.color = '#ef4444';
      return;
    }

    // Create new user
    users[username] = {
      password: password,
      inventory: [],
      equipped: null,
      level: 1,
      xp: 0,
      coins: 100,
      maxInventory: 50,
      characters: [],
      squad: [],
      auras: [],
      freeSpins: 10,
      stats: {
        totalRolls: 0,
        totalTrades: 0,
        totalSales: 0,
        legendaryFound: 0,
        epicFound: 0,
        rareFound: 0,
        bestItem: null,
        battlesWon: 0,
        battlesLost: 0
      },
      achievements: [],
      tradeHistory: [],
      rollHistory: [],
      dailyStreak: 0,
      lastLoginDate: null
    };

    saveUsers(users);
    authMessage.textContent = 'Registration successful! You can now login.';
    authMessage.style.color = '#10b981';
    
    // Clear form
    usernameInput.value = '';
    passwordInput.value = '';
  });

  // Login function
  loginBtn.addEventListener('click', function() {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();

    if (!username || !password) {
      authMessage.textContent = 'Please fill in both fields';
      authMessage.style.color = '#ef4444';
      return;
    }

    const users = loadUsers();
    
    if (!users[username] || users[username].password !== password) {
      authMessage.textContent = 'Invalid username or password';
      authMessage.style.color = '#ef4444';
      return;
    }

    // Store current user
    localStorage.setItem('currentUser', username);
    
    // Redirect to game
    window.location.href = 'game.html';
  });

  // Handle Enter key
  function handleEnter(event) {
    if (event.key === 'Enter') {
      loginBtn.click();
    }
  }

  usernameInput.addEventListener('keypress', handleEnter);
  passwordInput.addEventListener('keypress', handleEnter);

  // Initialize demo users
  initializeDemoUsers();
});
</script>

</body>
</html>